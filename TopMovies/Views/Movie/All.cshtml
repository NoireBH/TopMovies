@model MovieViewModel[]
@inject IMovieService movieService

@{
	var movies = await movieService.GetAllMoviesAsync();
}

<form method="get">
	<div class="row">
		<div class="form-group col-md-3 d-flex justify-content-between">
			<div class="form-group">
				<label asp-for="Category"></label>
				<select asp-for="Category" class="form-control">
					<option value="">All</option>
					@foreach (var category in Model.Categories)
					{
						<option value="@category">@category</option>
					}
				</select>
			</div>
			<div class="form-group">
				<label asp-for="HousesPerPage"></label>
				<select asp-for="HousesPerPage" class="form-control">
					<option value="3">3</option>
					<option value="6">6</option>
					<option value="9">9</option>
				</select>
			</div>
		</div>
		<div class="form-group col-md-3">
			<label asp-for="SearchTerm"></label>
			<input asp-for="SearchTerm" class="form-control" placeholder="...">
		</div>
		<div class="form-group col-md-3">
			<div class="form-group">
				<label asp-for="HouseSorting"></label>
				<select asp-for="HouseSorting" class="form-control">
					<option value="0">Newest</option>
					<option value="1">Oldest</option>
					<option value="2">Price (Ascending)</option>
					<option value="3">Price (Descending)</option>
					<option value="4">Not rented first</option>
				</select>
			</div>
		</div>
		<div class="col-md-3">
			<div class="form-group mt-4 p-2">
				<input type="submit" value="Search" class="btn btn-primary" />
			</div>
		</div>
	</div>
</form>
@{
	var previousPage = Model.CurrentPage - 1;
	if (previousPage < 1)
	{
		previousPage = 1;
	}
	var maxPage = Math.Ceiling((double)Model.TotalHousesCount /
	Model.HousesPerPage);
}

<div class="container-fluid mt-2">
	<div class="row">
		@foreach (var movie in movies)
		{

			<div class="col-md-4 text-center">
				<div class=" all-movies-img-container">
					<a asp-area="" asp-controller="Movie" asp-action="Details" asp-route-id="@movie.Id">
						<img class="" src="@movie.ImageUrl" />
					</a>
					<h2>
						<a asp-area="" asp-controller="Movie" asp-action="Details" asp-route-id="@movie.Id">
							@movie.Name
						</a>						
					</h2>
					<h4>@movie.YearOfRelease</h4>
				</div>
				<div class="text-center">
					@if (User.IsAdmin())//not working!!!
					{
						<a asp-area="" asp-controller="Movie" asp-action="Edit" asp-route-id="@movie.Id"
						   class="btn btn-warning">Edit</a>
						<a asp-area="" asp-controller="Movie" asp-action="Delete" asp-route-id="@movie.Id"
						   class="btn btn-danger">Delete</a>
					}
				</div>
			</div>


		}
	</div>

</div>



